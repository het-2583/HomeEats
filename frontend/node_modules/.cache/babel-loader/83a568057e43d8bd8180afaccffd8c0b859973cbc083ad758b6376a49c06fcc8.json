{"ast":null,"code":"var _jsxFileName = \"/Users/het2583/Desktop/eats/frontend/src/contexts/NotificationContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NotificationContext = /*#__PURE__*/createContext();\nexport const useNotifications = () => {\n  _s();\n  return useContext(NotificationContext);\n};\n_s(useNotifications, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const NotificationProvider = ({\n  children\n}) => {\n  _s2();\n  const user = useSelector(state => state.auth.user);\n  const isAuthenticated = useSelector(state => state.auth.isAuthenticated);\n  const [notifications, setNotifications] = useState([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n\n  // Helper to get the right key for notifications\n  const getNotifKey = () => {\n    if (!user || !user.id) return null;\n    if (user.user_type === 'owner') return `owner_notifications_${user.id}`;\n    return `customer_notifications_${user.id}`;\n  };\n\n  // Load notifications for the current user\n  useEffect(() => {\n    const notifKey = getNotifKey();\n    if (notifKey) {\n      const saved = localStorage.getItem(notifKey);\n      setNotifications(saved ? JSON.parse(saved) : []);\n    } else {\n      setNotifications([]); // No user, clear notifications\n    }\n  }, [user]);\n\n  // Save notifications for the current user\n  useEffect(() => {\n    const notifKey = getNotifKey();\n    if (notifKey) {\n      localStorage.setItem(notifKey, JSON.stringify(notifications));\n      setUnreadCount(notifications.filter(n => !n.read).length);\n    } else {\n      setUnreadCount(0);\n    }\n  }, [notifications, user]);\n  const addNotification = message => {\n    if (!user || !user.id) return; // Only add if user is logged in\n    setNotifications(prev => {\n      const newNotif = {\n        id: Date.now(),\n        message,\n        timestamp: new Date().toISOString(),\n        read: false\n      };\n      const updated = [newNotif, ...prev].slice(0, 10);\n      return updated;\n    });\n  };\n  const markAllRead = () => {\n    setNotifications(prev => prev.map(n => ({\n      ...n,\n      read: true\n    })));\n  };\n  return /*#__PURE__*/_jsxDEV(NotificationContext.Provider, {\n    value: {\n      notifications,\n      addNotification,\n      unreadCount,\n      markAllRead\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s2(NotificationProvider, \"4wV/gp5XVVMW0PAQ0Wrj91buRJw=\", false, function () {\n  return [useSelector, useSelector];\n});\n_c = NotificationProvider;\nvar _c;\n$RefreshReg$(_c, \"NotificationProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useSelector","jsxDEV","_jsxDEV","NotificationContext","useNotifications","_s","NotificationProvider","children","_s2","user","state","auth","isAuthenticated","notifications","setNotifications","unreadCount","setUnreadCount","getNotifKey","id","user_type","notifKey","saved","localStorage","getItem","JSON","parse","setItem","stringify","filter","n","read","length","addNotification","message","prev","newNotif","Date","now","timestamp","toISOString","updated","slice","markAllRead","map","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/het2583/Desktop/eats/frontend/src/contexts/NotificationContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nconst NotificationContext = createContext();\n\nexport const useNotifications = () => useContext(NotificationContext);\n\nexport const NotificationProvider = ({ children }) => {\n  const user = useSelector((state) => state.auth.user);\n  const isAuthenticated = useSelector((state) => state.auth.isAuthenticated);\n  const [notifications, setNotifications] = useState([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n\n  // Helper to get the right key for notifications\n  const getNotifKey = () => {\n    if (!user || !user.id) return null;\n    if (user.user_type === 'owner') return `owner_notifications_${user.id}`;\n    return `customer_notifications_${user.id}`;\n  };\n\n  // Load notifications for the current user\n  useEffect(() => {\n    const notifKey = getNotifKey();\n    if (notifKey) {\n      const saved = localStorage.getItem(notifKey);\n      setNotifications(saved ? JSON.parse(saved) : []);\n    } else {\n      setNotifications([]); // No user, clear notifications\n    }\n  }, [user]);\n\n  // Save notifications for the current user\n  useEffect(() => {\n    const notifKey = getNotifKey();\n    if (notifKey) {\n      localStorage.setItem(notifKey, JSON.stringify(notifications));\n      setUnreadCount(notifications.filter(n => !n.read).length);\n    } else {\n      setUnreadCount(0);\n    }\n  }, [notifications, user]);\n\n  const addNotification = (message) => {\n    if (!user || !user.id) return; // Only add if user is logged in\n    setNotifications(prev => {\n      const newNotif = {\n        id: Date.now(),\n        message,\n        timestamp: new Date().toISOString(),\n        read: false,\n      };\n      const updated = [newNotif, ...prev].slice(0, 10);\n      return updated;\n    });\n  };\n\n  const markAllRead = () => {\n    setNotifications(prev => prev.map(n => ({ ...n, read: true })));\n  };\n\n  return (\n    <NotificationContext.Provider value={{ notifications, addNotification, unreadCount, markAllRead }}>\n      {children}\n    </NotificationContext.Provider>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}